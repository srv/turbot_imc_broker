<launch>

  <param name="use_sim_time" value="true"/>

  <!-- <arg name="bagfile" default="/home/xesc/BAGFILES_BAG/emisari_27092017/auv170927_1234_2017-09-27-10-34-47_0.bag"/> -->
  <arg name="bagfile" default="$(env HOME)/bagfiles/valldemossa_night_170717_2130_cut.bag"/>

  <node name="player" pkg="rosbag" type="play" args="--clock $(arg bagfile)"/>

  <node pkg="ros_imc_broker" type="ros_imc_adapter_node" name="ros_imc_adapter_node" output="screen">
    <param name="system_name" value="turbot"/>
    <param name="system_type" value="uuv"/>
    <param name="system_imc_id" value="8192"/> <!--0x2000-->
    <param name="enable_loopback" value="True"/>
    <param name="udp_port" value="6002"/>

    <!--param name="udp_port_tries" value="10"/-->
    <!--param name="multicast_addr" value="224.0.75.69"/-->
    <!--param name="multicast_port" value="30100""/-->
    <!--param name="multicast_port_range" value="5"/-->

    <param name="static_destinations_addrs" value="172.17.0.1:6001"/>
  </node>

  <node pkg="ros_imc_broker" type="params_changer_node" name="settings" output="screen"/>

  <node pkg="turbot_imc_broker" type="turbot_imc_broker_node" name="turbot_imc_broker_node" output="screen">
  	<param name="outdir" value="/home/xesc/workspace/ros/src/turbot_imc_broker/data"/>
    <param name="filename" value="rhodamine_data.csv"/>
  </node>

</launch>
